@()(implicit request: RequestHeader)
	@main("PHI注释(病原与宿主互作)") {

		<div class="row">
			<div class="form-group col-sm-12">
				<h2 class="page-heading"
				style="text-align: left;
					border-bottom: 5px solid #e9f3f4">PHI注释(病原与宿主互作)
					<a target="_blank" href="http://www.phi-base.org/"><span class="fa fa-question-circle"></span></a>
				</h2>
			</div>
		</div>

		<form class="registration-form form-horizontal" id="form"
		accept-charset="UTF-8" method="post">

			<div class="form-group">
				<label class="control-label col-sm-2">任务名:</label>
				<div class="col-sm-3">
					<input class="form-control" name="missionName" onfocus="inputSelect(this)">
				</div>

			</div>

			<div class="form-group">
				<label class="control-label col-sm-2">Type of query:</label>
				<div class="col-sm-3">
					<select class="form-control" onchange="change(this)" name="method">
						<option selected value="text">Text</option>
						<option value="file">File</option>
					</select>
				</div>
			</div>

			<div class="form-group" id="queryContent">
				<label class="control-label col-sm-2">Query text:<br>(蛋白序列)</label>
				<div class="col-sm-8">
					<textarea class="form-control monospace" name="queryText" id="queryText" rows="7"></textarea>
					<span class="help-block">e.g.,&nbsp;<a href="#"><em id="egQuery">
						示例</em></a></span>
				</div>
			</div>

			<div id="queryFile" style="display: none;">
				<div class="form-group">
					<label class="control-label col-sm-2">Query fasta file:</label>
					<div class="col-sm-8">
						<input id="input-1" type="file" class="file control-label" name="file" data-show-preview="false"
						data-show-upload="false" accept="fa,fasta">
					</div>
				</div>
			</div>

			<div class="form-group" style="display: none">
				<label class="control-label col-sm-2">序列类型:</label>
				<div class="col-sm-3">
					<select class="form-control" name="seqType">
						<option value="n">nucleic acid</option>
						<option value="p" selected>Protein</option>
					</select>
				</div>
			</div>

			<div class="form-group">
				<label class="control-label col-sm-2">Evalue:</label>
				<div class="col-sm-2">
					<input class="form-control" name="evalue" id="evalue" value="1e-5">
				</div>

				<label class="control-label col-sm-2">Max target seqs:</label>
				<div class="col-sm-2">
					<input class="form-control" name="maxTargetSeqs" id="mCharacteristic" value="5">
				</div>

			</div>

			<div class="form-group">
				<div class="actions col-sm-offset-2 col-sm-2">
					<button type="button" class="btn btn-primary" style="width: 90%;" id="search" onclick="mySearch()">
						运行</button>
				</div>

				<div class="actions  col-sm-2">
					<button type="reset" class="btn btn-primary" style="width: 90%;">
						重置</button>
				</div>
			</div>

		</form>

		<hr>
		<h4>分析结果:</h4>

		<div class="table-responsive">

			<table class="display table table-bordered" id="missionTable" data-pagination="true" data-search="true"
			data-toolbar="#toolbar" data-page-list="[5, 10, all]" data-page-size="5" data-multiple-search="true">
				<thead>
					<tr>
						<th data-field="missionname" data-sortable="true">任务名</th>
						<th data-field="args" data-sortable="true" data-formatter="genome.argsFmt">参数</th>
						<th data-field="state" data-sortable="true"
						data-formatter="genome.stateFmt"
						>状态</th>
						<th data-field="starttime" data-sortable="true">开始时间</th>
						<th data-field="endtime" data-sortable="true">结束时间</th>
						<th data-field="operate" data-formatter="genome.operateFmt">操作</th>
					</tr>
				</thead>
			</table>
		</div>

		<div id="result" style="display: none">
			<hr>
			<h4 style="color: black" id="missionResult">PHI注释结果展示(<span id="missionName"></span>):</h4>
			<div id="resultContent">

				<label>显示的列:</label>
				<div id="checkbox" class="checkbox">

				</div>

				<div class="table-responsive" id="tableContent">
					<table class="display table table-bordered" id="table" data-pagination="true" data-search="true"
					data-toolbar="#toolbar" data-page-list="[10, 25, 50, 100, all]" data-multiple-search="true"
					data-show-export="true" data-export-types="['excel','txt']" data-export-data-type="all"
					>
						<thead>
							<th data-field='geneId' data-sortable='true' id="marker">Query-Name</th>
						</thead>
					</table>

				</div>

			</div>
		</div>

		<script>
				var originalHtml = ""
				var kind = "phi"
				$(function () {
					$('#missionTable').bootstrapTable({});
					genome.getAllMission(kind)
					var wsUri = "@routes.GenomeController.updateMissionSocket("phi").webSocketURL()"
					genome.testWebSocket(wsUri);
					originalHtml = $("#tableContent").html()
					bootstrapValidator()
					refreshMissionName()
				})

				function showResult(id) {
					showId = id
					var index = layer.load(1, {
						shade: [0.1, '#fff']
					});
					$.ajax({
						url: "@routes.GenomeController.phiResult()?missionId=" + id,
						type: "get",
						dataType: "json",
						success: function (data) {
							layer.close(index)
							refreshContent(data)
							$("#result").show()
							var target_top = $("#missionResult").offset().top
							$("html,body").animate({scrollTop: target_top}, 800)
						}
					})
				}

				function setColumns(value) {
					var element = $("input:checkbox[value='" + value + "']")
					if (element.is(":checked")) {
						$('#table').bootstrapTable('showColumn', value);
					} else {
						$('#table').bootstrapTable('hideColumn', value);
					}
				}

				function change(element) {
					var value = $(element).find(">option:selected").val()
					if (value == "text") {
						$("#queryContent").show()
						$("#queryFile").hide()
					} else {
						$("#queryContent").hide()
						$("#queryFile").show()
					}
				}

				$('#egQuery').click(function () {
					var eg =">SF0001 thrL AE005674 189 255 + thr operon leader peptide\n" +
							"MKRISTTITTTITITTGNGAG\n" +
							">SF0002 thrA AE005674 335 2798 + aspartokinase I, homoserine dehydrogenase I\n" +
							"MRVLKFGGTSVANAERFLRVADILESNARQGQVATVLSAPAKITNHLVAMIEKTISGQDALPNISDAERIFAELLTGLAAAQPGFPLAQLKTFVDQEFAQIKHVLHGISLLGQCPDSINAALICRGEKMSIAIMAGVLEARGHNVTVIDPVEKLLAVGHYLESTVDIAESTRRIAASRIPADHMVLMAGFTAGNEKGELVVLGRNGSDYSAAVLAACLRADCCEIWTDVDGVYTCDPRQVPDARLLKSMSYQEAMELSYFGAKVLHPRTITPIAQFQIPCLIKNTGNPQAPGTLIGASRDEDELPVKGISNLNNMAMFSVSGPGMKGMVGMAARVFAAMSRARISVVLITQSSSEYSISFCVPQSDCVRAERAMQEEFYLELKEGLLEPLAVTERLAIISVVGDGMRTLRGISAKFFAALARANINIVAIAQGSSERSISVVVNNDDATTGVRVTHQMLFNTDQVIEVFVIGVGGVGGALLEQLKRQQSWLKNKHIDLRVCGVANSKALLTSVHGLNLENWQEELAQAKEPFNLGRLIRLVKEYHLLNPVIVDCTSSQAVADQYADFLREGFHVVTPNKKANTSSMDYYHQLRYAAEKSRRKFLYDTNVGAGLPVIENLQNLLNAGDELVKFSGILSGSLSYIFGKLDEGMSFSEATTLAREMGYTEPDPRDDLSGMDVARKLLILARETGRELELADIEIEPVLPAEFNAEGDVAAFMANLSQLDDLFAARVAKARDEGKVLRYVGNIDEDGVCRVKIAEVDGNDPLFKVKNGENALAFYSHYYQPLPLVLRGYGAGNDVTAAGVFADLLRTLSWKLGV\n" +
							">SF0003 thrB AE005674 2799 3732 + homoserine kinase\n" +
							"MVKVYAPASSANMSVGFDVLGAAVAPVDGALLGDVVTVEAAETFSLNNLGRFADKLPSEPRENIVYQCWERFCQELGKQIPVAMTLEKNMPIGSGLGSSACSVVAALMAMNEHCGKPLNDTRLLALMGELEGRISGSIHYDNVAPCFLGGMQLMIEENDIISQQVPGFDEWLWVLAYPGIKVSTAEARAILPAQYRRQDCIAHGRHLAGFIHACYSRQPELAAKLMKDVIAEPYRERLLPGFRQARQAVAEIGAVASGISGSGPTLFALCDKPDTAQRVADWLGKNYLQNQEGFVHICRLDTAGARVLEN\n" +
							">SF0004 thrC AE005674 3732 5019 + threonine synthase\n" +
							"MKLYNLKDHNEQVSFAQAVTQGLGKNQGLFFPHDLPEFSLTEIDEMLKLDFVTRNAKILSAFIGDEIPQEILEERVRAAFAFPAPVANVESDVGCLELFHGPTLAFKDFGGRFMAQMLTHIADDKPVTILTATSGDTGAAVAHAFYGLPNVKVVILYPRGKISPLQEKLFCTLGGNIETVAIDGDFDACQALVKQAFDDEELKVALGLNSANSINISRLLAQICYYFEAVAQLPQEARNQLVVSVPSGNFGDLTAGLLAKSFGLPVKRFIAATNVNDTVPRFLHDGQWSPKATQATLSNAMDVSQPNNWPRVEELFRRKIWQLKELGYAAVDDETTQQTMRELKELGYTSEPHAAVAYRALRDQLNPGEYGLFLGTAHPAKFKESVEAILGETLDLPKELAERADLPLLSHNLPADFSALRKLMMNHQ\n" +
							">SF0005 NA AE005674 5241 5529 + conserved hypothetical protein\n" +
							"MQSIVLALSLVLVAPMAAQAAEITLVPSVKLQIGDRDNRGYYWDGGHWRDHGWWKQHYEWRGNRWHPHGPPPPPRHHKKAPHDHHGGHGPGKHHR\n" +
							">SF0006 yaaA AE005674 5681 6458 - conserved hypothetical protein\n" +
							"MLILISPAKTLDYQSPLTTTRYTLPELLDNSQQLIHEARKLTPPQISTLMRISDKLAGINAARFHDWQPDFTPANARQAILAFKGDVYTGLQAETFSEDDFDFAQQHLRMLSGLYGVLRPLDLMQPYRLEMGIRLENARGKDLYQFWGDIITNKLNEALAAQGDNVVINLASDEYFKSVKPKKLNAEIIKPVFLDEKNGKFKIISFYAKKARGLMSRFIIENRLTKPEQLTGFNSEGYFFDEDSSSNGELVFKRYEQR\n" +
							">SF0008 NA AE005674 8073 8358 + hypothetical protein\n" +
							"MYKNGGRYQRSVRNPKQSRLAITVLSAVALTLRRDIIRADRLHPPNKLFKEKYYHDGQIDLPSSVHHRSGRHWGHRGNEAVSTAGCHNQPFSHS\n" +
							">SF0009 talB AE005674 8236 9190 + transaldolase B\n" +
							"MTDKLTSLRQYTTVVADTGDIAAMKLYQPQDATTNPSLILNAAQIPEYRKLIDDAVAWAKQQSNDRAQQIVDATDKLAVNIGLEILKLVPGRISTEVDARLSYDTEASIAKAKRLIKLYNDAGISNDRILIKLASTWQGIRAAEQLEKEGINCNLTLLFSFAQARACAEAGVFLISPFVGRILDWYKANTDKKEYAPAEDPGVVSVSEIYQYYKEHGYETVVMGASFRNIGEILELAGCDRLTIAPALLKELAESEGAIERKLSYTGEVKARPARITESEFLWQHNQDPMAVDKLAEGIRKFAIDQEKLEKMIGDLL\n" +
							">SF0010 mog AE005674 9304 9892 + molybdopterin biosynthesis protein\n" +
							"MNTLRIGLVSISDRASSGVYQDKGIPALEEWLTSALTTPFELETRLIPDEQAIIEQTLCELVDEMSCHLVLTTGGTGPARRDVTPDATLAVADREMPGFGEQMRQISLHFVPTAILSRQVGVIRKQALILNLPGQPKSIKETLEGVKDAEGNVVVHGIFASVPYCIQLLEGPYVETAPEVVAAFRPKSARRDVSE\n" +
							">SF0011 yaaH AE005674 9926 10493 - conserved hypothetical protein\n" +
							"MGNTKLANPAPLGLMGFGMTTILLNLHNVGYFALDGIILAMGIFYGGIAQIFAGLLEYKKGNTFGLTAFTSYGSFWLTLVAILLMPKLGLTDAPNAQFLGVYLGLWGVFTLFMFFGTLKGARVLQFVFFSLTVLFALLAIGNIAGNAAIIHFAGWIGLICGASAIYLAMGEVLNEQFGRTVLPIGESH\n" +
							">SF0012 NA AE005674 10641 11355 - putative oxidoreductase\n" +
							"MNVNYLNDSDLDFLQHCSEEQLANFARLLTHNEKGKTRLSSILMRNELFKSMEGHPEQHRRNWQLIAGELQHFGGDSIANKLRGHGKLYRAILLDVSKRLKLKADKEMSTFEIEQQLLEQFLRNTWKKMDEEHKQEFLHAVDARVNELEELLPLLMKDKLLAKGVSHLLSSQLTRILRTHAAMSVLGHGLLRGAGLGGPVGAALNGVKAVSGSTYRVTIPAVLQIACLRRMVSATQV\n" +
							">SF0013 yaaI AE005674 11380 11785 - conserved hypothetical protein\n" +
							"MKSVFTISASLAISLMLCCTAQANDHKLLGVIAMPRNETNDLALKLPVCRIVKRIQLSADHGDLQLSGASVYFKAARSASQSLNIPSEIKEGQTTDWININSDNDNKRCVSKITFSGHTVNSSDMATLKIIGDD\n" +
							">SF0014 dnaK AE005674 12161 14078 + chaperone Hsp70; autoregulated heat shock protein\n" +
							"MGKIIGIDLGTTNSCVAIMDGTIPRVLENAEGDRTTPSIIAYTQDGETLVGQPAKRQAVTNPQNTLFAIKRLIGRRFQDEEVQRDVSIMPFKIIAADNGDAWVEVKGQKMAPPQISAEVLKKMKKTAEDYLGEPVTEAVITVPAYFNDAQRQATKDAGRIAGLEVKRIINEPTAAALAYGLDKGTGNRTIAVYDLGGGTFDISIIEIDEVDGEKTFEVLATNGDTHLGGEDFDSRLINYLVEEFKKDQGIDLRNDPLAMQRLKEAAEKAKIELSSAQQTDVNLPYITADATGPKHMNIKVTRAKLESLVEDLVNRSIEPLKVALQDAGLSVSDIDDVILVGGQTRMPMVQKKVAEFFGKEPRKDVNPDEAVAIGAAVQGGVLTGDVKDVLLLDVTPLSLGIETMGGVMTTLIAKNTTIPTKHSQVFSTAEDNQSAVTIHVLQGERKRAADNKSLGQFNLDGINPAPRGMPQIEVTFDIDADGILHVSAKDKNSGKEQKITIKASSGLNEDEIQKMVRDAEANAEADRKFEELVQTRNQGDHLLHSTRKQVEEAGDKLPADDKTAIESALTALETALKGEDKAAIEAKMQELAQVSQKLMEIAQQQHAQQQTAGADASANNAKDDDVVDAEFEEVKDKK\n" +
							">SF0015 dnaJ AE005674 14166 15297 + chaperone with DnaK; heat shock protein\n" +
							"MAKQDYYEILGVSKTAEEREIRKAYKRLAMKYHPDRNQGDKEAEAKFKEIKEAYEVLTDSQKRAAYDQYGHAAFEQGGMGGGGFGGGADFSDIFGDVFGDIFGGGRGRQRAARGADLRYNMELTLEEAVRGVTKEIRIPTLEECDVCHGSGAKPGTQPQTCPTCHGSGQVQMRQGFFAVQQTCPHCQGRGTLIKDPCNKCHGHGRVERSKTLSVKIPAGVDTGDRIRLAGEGEAGEHGAPAGDLYVQVQVKQHPIFEREGNNLYCEVPINFAMAALGGEIEVPTLDGRVKLKVPGETQTGKLFRMRGKGVKSVRGGAQGDLLCRVVVETQIGLDEKDKQLLHELHESYGGPTGEHNSPRSKSFFDGVKKFFDDLTR\n" +
							">SF0016 nhaA AE005674 16139 17306 + Na+/H+ antiporter\n" +
							"MKHLHRFFSSDASGGIILIIAAILAMIMANSGATSGWYHDFLETPVQLRVGSLEINKNMLLWINDALMAVFFLLVGLEVKRELMQGSLASLRQAAFPVIAAIGGMIVPALLYLAFNYADPITREGWAIPAATDIAFALGVLALLGSRVPLVLKIFLMALAIIDDLGAIIIIALFYTNDLSMASLGVAAVAIAVLAVLNLCGVRRTGVYILVGVVLWTAVLKSGVHATLAGVIVGFFIPLKEKHGRSPAKRLEHVLHPWVAYLILPLFAFANAGVSLQGVTLDGLTSILPLGIIAGLLIGKPLGISLFCWLALRLKLAHLPEGTTYQQIMVVGILCGIGFTMSIFIASLAFGSVDPELINWAKLGILVGSISSAVIGYSWLRVRLRPSV\n" +
							">SF0017 nhaR AE005674 17371 18271 + transcriptional activator of nhaA\n" +
							"MSHINYNHLYYFWHVYKEGSVVGAAEALYLTPQTITGQIRALEERLQGKLFKRKGRGLEPSELGELVYRYADKMFTLSQEMLDIVNYRKESNLLFDVGVADALSKRLVSSVLNAAVVEGEPIHLRCFESTHEMLLEQLSQHKLDMIISDCPIDSTQQEGLFSVRIGECGVSFWCTNPPPEKPFPACLEERRLLIPGRRSMLGRKLLNWFNSQGLNVEILGEFDDAALMKAFGAMHNAIFVAPTLYAYDFYADKTVVEIGRVENVMEEYHAIFAERMIQHPAVQRICNTDYSALFSPAVR\n" +
							">SF0018 insB AE005674 18683 19079 - IS1 ORF2\n" +
							"MIVCAEMDEHWGYVGAKSRQRWLFYAYDRIRRTVVAHVFGERTLATLERFLSLLSAFEVVVWMTDGWPLYESRLKGKLHVISKRYTQRIERHNLNLRQHLARLVRKSLSFSKSVELHDKVIGHYLNIKHYQ\n" +
							">SF0019 insA AE005674 19105 19381 - IS1 ORF1\n" +
							"MASISIRCPSCSATEGVVRNGKSTAGHQRYLCSHCRKTWQLQFTYTASQPGTHQKIIDMAMNGVGCRASARIMGVGLNTVLRHLKNSGRSR\n" +
							">SF0020 rpsT AE005674 19769 19955 - 30S ribosomal subunit protein S20\n" +
							"MMRPFIKKGDAAIEAGDKAAAQKAFNEMQPIVDRQAAKGLIHKNKAARHKANLTAQINKLA\n" +
							">SF0021 ribF AE005674 20361 21303 + putative regulator\n" +
							"MKLIRGIHNLSQAPQEGCVLTIGNFDGVHRGHRALLQGLQEEGRKRNLPVMVMLFEPQPLELFATDKAPARLTRLREKLRYLAECGVDYVLCVRFDRRFAALTAQNFISDLLVKHLRVKFLAVGDDFRFGAGREGDFLLLQKAGMEYGFDITSTQTFCEGGVRISSTAVRQALADDNLALAESLLGHPFAISGRVVHGDELGRTIGFPTANVPLRRQVSPVKGVYAVEVLGLGEKPLPGVANIGTRPTVAGIRQQLEVHLLDVAMDLYGRHIQVVLRKKIRNEQRFASLDELKAQIARDELTAREFFGLTKPA\n" +
							">SF0022 ileS AE005674 21345 24162 + isoleucine tRNA synthetase\n" +
							"MSDYKSTLNLPETGFPMRGDLAKREPGMLARWTDDDLYGIIRAAKKGKKTFILHDGPPYANGSIHIGHSVNKILKDIIVKSKGLSGYDSPYVPGWDCHGLPIELKVEQEYGKPGEKFTAAEFRAKCREYAATQVDGQRKDFIRLGVLGDWSHPYLTMDFKTEANIIRALGKIIGNGHLHKGAKPVHWCVDCRSALAEAEVEYYDKTSPSIDVAFQAVDQDALKAKFGVSNVNGPISLVIWTTTPWTLPANRAISIAPDFDYALVQIDGQAVILAKDLVESVMQRIGVTDYTILGTVKGAELELLRFTHPFMGFDVPAILGDHVTLDAGTGAVHTAPGHGPDDYVIGQKYGLETANPVGPDGTYLPGTYPTLDGVNVFKANDIVVALLQEKGALLHVEKMQHSYPCCWRHKTPIIFRATPQWFVSMDQKGLRAQSLKEIKGVQWLPDWGQARIESMVANRPDWCISRQRTWGVPMSLFVHKDTEELHPRTLELMEEVAKRVEVDGIQAWWDLDAKEILGDEADQYVKVPDTLDVWFDSGSTHSSVVDVRPEFAGHAADMYLEGSDQHRGWFMSSLMISTAMKGKAPYRQVLTHGFTVDGQGRKMSKSIGNTVSPQDVMNKLGADILRLWVASTDYTGEMAVSDEILKRAADSYRRIRNTARFLLANLNGFDPAKDMVKPEEMVVLDRWAVGCAKAAQEDILKAYEAYDFHEVVQRLMRFCSVEMGSFYLDIIKDRQYTAKADSVARRSCQTALYHIAEALVRWMAPILSFTADEVWGYLPGEREKYVFTGEWYEGLFGLADSEAMNDAFWDELLKVRGEVNKVIEQARADKKVGGSLEAAVTLYAEPELAAKLTALGDELRFVLLTSGATVADYNDAPADAQQSEVLKGLKVALSKAEGEKCPRCWHYTQDVGKVAEHAEICGRCVSNVAGDGEKRKFA\n" +
							">SF0023 lspA AE005674 24161 24656 + prolipoprotein signal peptidase (SPase II)\n" +
							"MSQSICSTGLRWLWLVVVVLIIDLGSKYLILQNFALGDTVPLFPSLNLHYARNYGAAFSFLADSGGWQRWFFAGIAIGISVLLAVMMYRSKATQKLNNIAYALIIGGALGNLFDRLWHGFVVDMIDFYVGDWHFATFNLADTAICVGAALIVLEGFLPSKAKKQ\n" +
							">SF0024 slpA AE005674 24748 25198 - probable FKBX-type 16kD peptidyl-prolyl cis-trans isomerase (a rotamase)\n" +
							"MSESVQSNSAVLVHFTLKLDDGTTAESTRNNGKPALFRLGDASLSEGLEQHLLGLKVGDKTTFSLEPDAAFGVPSPDLIQYFSRREFMDAGEPEIGAIMLFTAMDGSEMPGVIREINGDSITVDFNHPLAGQTVHFDIEVLEIDPALEA\n" +
							">SF0025 slpA AE005674 25255 25705 + probable FKBX-type 16kD peptidyl-prolyl cis-trans isomerase (a rotamase)\n" +
							"MSESVQSNSAVLVHFTLKLDDGTTAESTRNNGKPALFRLGDASLSEGLEQHLLGLKVGDKTTFSLEPDAAFGVPSPDLIQYFSRREFMDAGEPEIGAIMLFTAMDGSEMPGVIREINGDSITVDFNHPLAGQTVHFDIEVLEIDPALEA\n" +
							">SF0026 lytB AE005674 25706 26657 + LytB protein\n" +
							"MQILLANPRGFCAGVDRAISIVENALAIYGAPIYVRHEVVHNRYVVDSLRERGAIFIEQISEVPDGAILIFSAHGVSQAVRNEAKSRDLTVFDATCPLVTKVHMEVARASRRGEESILIGHAGHPEVEGTMGQYSNPEGGMYLVESPDDVWKLTVKNEEKLSFMTQTTLSVDDTSDVIDALRKRFPKIVGPRKDDICYATTNRQEAVRALAEQAEVVLVVGSKNSSNSNRLAELAQRMGKHAFLIDDAKDIQEEWVKEVKCVGVTAGASAPDILVQNVVARLQQLGGGEAIPLEGREENIVFEVPKELRVDIREVD\n" +
							">SF0027 yaaF AE005674 26722 27637 + conserved hypothetical protein\n" +
							"MRLPIFLDTDPGIDDAVAIAAAIFAPELDLQLMTTVAGNVSVEKTTRNALQLLHFWNAEIPLAQGAAVPLVRAPRDAASVHGESGMAGYDFVEHNRKPLGIPAFLAIRDALMRAPEPVTLVAIGPLTNIALLLLQCPECKPYIRRLVIMGGSAGRGNCTPNAEFNIAADPEAAACVFRSGIEIVMCGLDVTNQAILTPDYLATLPELNRTGKMLHALFSHYRSGSMQSGLRMHDLCAIAWLVRPDLFTLKPCFVAVETQGEFTSGTTVVDIDGCLGKPANVQVALDLNVKGFQQWVAEVLALVP\n" +
							">SF0028 dapB AE005674 27803 28625 + dihydrodipicolinate reductase\n" +
							"MHDANIRVAIAGAGGRMGRQLIQAALALEGVQLGAALEREGSSLLGSDAGELAGAGKTGVTVQSSLDAIKDDFDVFIDFTRPEGTLNHLAFCRQHGKGMVIGTTGFDEAGKQAIRDAAADIAIVFAANFSVGVNVMLKLLEKAAKVMGDYTDIEIIEAHHRHKVDAPSGTALAMGEAIAHALDKDLKDCAVYSREGHTGERVPGTIGFATVRAGDIVGEHTAMFADIGERLEITHKASSRMTFANGAVRSALWLSGKESGLFDMRDVLDLNNL\n" +
							">SF0029 carA AE005674 29080 30229 + carbamoyl-phosphate synthetase, glutamine (small) subunit\n" +
							"MIKSALLVLEDGTQFHGRAIGATGSAVGEVVFNTSMTGYQEILTDPSYSRQIVTLTYPHIGNVGTNDADEESSQVHAQGLVIRDLPLIASNFRNTEDLSSYLKRHNIVAIADIDTRKLTRLLREKGAQNGCIIAGDNPDAALALEKARAFPGLNGMDLAKEVTTAEAYSWTQGSWTLTGGLPEAKKEDELPFHVVAYDFGAKRNILRMLVDRGCRLTIVPAQTSAEDVLKMNPDGIFLSNGPGDPAPCDYAITAIQKFLETDIPVFGICLGHQLLALASGAKTVKMKFGHHGGNHPVKDVEKNVVMITAQNHGFAVDEATLPANLRVTHKSLFDGTLQGIHRIDKPAFSFQGHPEASPGPHDAAPLFDHFIKLIEQYRKTAK\n" +
							">SF0030 carB AE005674 30246 33468 + carbamoyl-phosphate synthase large subunit\n" +
							"MPKRTDIKSILILGAGPIVIGQACEFDYSGAQACKALREEGYRVILVNSNPATIMTDPEMADATYIEPIHWEVVRKIIEKERPDAVLPTMGGQTALNCALELERQGVLEEFGVTMIGATADAIDKAEDRRRFDVAMKKIGLETARSGIAHTMEEALAVAADVGFPCIIRPSFTMGGSGGGIAYNREEFEEICARGLDLSPTKELLIDESLIGWKEYEMEVVRDKNDNCIIVCSIENFDAMGIHTGDSITVAPAQTLTDKEYQIMRNASMAVLREIGVETGGSNVQFAVNPKNGRLIVIEMNPRVSRSSALASKATGFPIAKVAAKLAVGYTLDELMNDITGGRTPASFEPSIDYVVTKIPRFNFEKFAGANDRLTTQMKSVGEVMAIGRTQQESLQKALRGLEVGATGFDPKVSLDDPEALTKIRRELKDAGAERIWYIADAFRAGLSVDGVFNLTNIDRWFLVQIEELVRLEEKVAEVGITGLNAEFLRQLKRKGFADARLAKLAGVREAEIRKLRDQYDLHPVYKRVDTCAAEFATDTAYMYSTYEEECEANPSTDREKIMVLGGGPNRIGQGIEFDYCCVHASLALREDGYETIMVNCNPETVSTDYDTSDRLYFEPVTLEDVLEIVRIEKPKGVIVQYGGQTPLKLARALEAAGVPVIGTSPDAIDRAEDRERFQHAVDRLKLKQPANATVTAIEMAVEKAKEIGYPLVVRPSYVLGGRAMEIVYDEADLRRYFQTAVSVSNDAPVLLDHFLDDAVEVDVDAICDGEMVLIGGIMEHIEQAGVHSGDSACSLPAYTLSQEIQDVMRQQVQKLAFELQVRGLMNVQFAVKNNEVYLIEVNPRAARTVPFVSKATGVPLAKVAARVMAGKSLAEQGVTKEVIPPYYSVKEVVLPFNKFPGVDPLLGPEMRSTGEVMGVGRTFAEAFAKAQLGSNSTMKKHGRALLSVREGDKERVVDLAAKLLKQGFELDATHGTAIVLGEAGINPRLVNKVHEGRPHIQDRIKNGEYTYIINTTSGRRAIEDSRVIRRSALQYKVHYDTTLNGGFATAMALNADATEKVISVQEMHAQIK\n" +
							">SF0031 caiF AE005674 33624 34125 + transcriptional regulator of cai operon\n" +
							"MKLHTIDISTILIWPCLIASKRVIARLLICETGVRMCEGYVEKPLYLLIAEWMMAENRWVIAREISIHFDIEHSKAVNTLTYILSEVTEISCEVKMIPNKLEGRGCQCQRLVKVVDIDEQIYARLRNNSREKLVGVRKTPRIPAVPLTELNREQKWQMMLSKSMRR\n" +
							">SF0032 caiE AE005674 34210 34822 - carnitine operon protein CaiE\n" +
							"MERTLTTVSYYAFEGLIPVVHPTAFVHPSAVLIGDVIVGAGVYIGPLASLRGDYGRLIVQAGANIQDGCIMHGYCDTDTIVGENGHIGHGAILHGCVIGRDALVGMNSVIMDGAVIGEESIVAAMSFVKAGFSGEKRQLLMGTPARAVRSVSDDELHWKRLNTKEYQDLVGRCHASLHETQPLRQMEENRPRLQGTTDVTPKR\n" +
							">SF0033 caiD AE005674 34806 35700 - carnitine racemase\n" +
							"MKRQGTTLPANNHALKQYAFFAGMLSSLKKQKWRKGMSESLHLTRNGSILEITLDRPKANAIDAKTSFEMGEVFLNFRDDPQLRVAIITGAGEKFFSAGWDLKAAAEGEAPDADFGPGGFAGLTEIFNLDKPVIAAVNGYAFGGGFELALAADFIVCADNASFALPEAKLGIVPDSGGVLRLPKILPPTIVNEMVMTGRRMGAEEALRWGIVNRVVSQAELMDNARELAQQLVNSAPLAIAALKEIYRTTSEMPVEEAYRYIRSGVLKHYPSVLHSEDAIEGPLAFAEKRDPVWKGR\n" +
							">SF0034 caiC AE005674 35700 37269 - probable crotonobetaine/carnitine-CoA ligase\n" +
							"MDRGAMDIIGGQHLRQMWDDLADVYGHKTALICESSGGVVNRYSYLELNQEINRTANLFYTLGIRKGNKVALHLDNCPEFIFCWFGLAKIGAIMVPINARLLREESEWILQNSQACLLVTSAQFYPMYQQIQQEDATQLRHICLTDVALPADDGVSSFTQLKNQQPATLCYAPPLSTDDTAEILFTSGTTSRPKGVVITHYNLRFAGYYSAWQCALRDDDVYMTVMPAFHIDCQCTAAMAAFSAGATFVLVEKYSARAFWGQAQKYRATITECIPMMIRTLMVQPPSANDRQHRLREVMFYLNLSEQEKDAFCERFGVRLLTSYGMTETIVGIIGDRPSDKRRWPSIGRAGFCYEAEIRDDHNRPLPAGEIGEICIKGVPGKTIFKEYFLNPKATAKVLEADGWLHTGDTGYRDEEGFFYFVDRRCNMIKRGGENVSCVELENIIATHPKIQDIVVVGIKDSIRDEAIKAFVVLNEGETLSEEEFFRFCEQNMAKFKVPSYLEIRKDLPRNCSGKIIRKNLK\n" +
							">SF0035 caiB AE005674 37327 38545 - l-carnitine dehydratase\n" +
							"MDHLPMPKFGPLAGLRVVFSGIEIAGPFAGQMFAEWGAEVIWIENVAWADTIRVQPNYPQLSRRNLHALSLNIFKDEGREAFLKLMETTDIFIEASKGPAFARRGITDEVLWQHNPKLVIAHLSGFGQYGTEEYTNLPAYNTIAQAFSGYLIQNGDVDQPMPAFPYTADYFSGLTATTAALAALHKVRETGKGESIDIAMYEVMLRMGQYFMMDYFNGGEMCPRMSKGKDPYYAGCGLYKCADGYIVMELVGITQIEECFKDIGLAHLLGTPEIPEGTQLIHRIECPYGPLVEEKLDAWLAAHTIAEVKERFAELNIACAKVLTVPELESNPQYVARESITQWQTMDGRTCKGPNIMPKFKNNPGQIWRGMPSHGMDTAAILKNIGYSENDIQELVSKGLAKVED\n" +
							">SF0036 caiA AE005674 38673 39816 - probable carnitine operon oxidoreductase\n" +
							"MDFNLNDEQELFVAGIRELMASENWEAYFAECDRDSVYPERFVKALADMGIDSLLIPEEHGGLDAGFVTLAAVWMELGRLGAPTYVLYQLPGGFNTFLREGTQEQIDKIMAFRGTGKQMWNSAITEPGAGSDVGSLKTTYTRRNGKIYLNGSKCFITSSAYTPYIVVMARDGASPDKPVYTEWFVDMSKPGIKVTKLEKLGLRMDSCCEITFDDVELDEKDMFGREGNGFNRVKEEFDHERFLVALTNYGTAMCAFEDAARYANQRVQFGEAIGRFQLIQEKFAHMAIKLNSMKNMLYEAAWKADNGTITSGDAAMCKYFCANAAFEVVDSAMQVLGGVGIAGNHRISRFWRDLRVDRVSGGSDEMQILTLGRAVLKQYR"

					$('#queryText').val(eg);
					$("#form").bootstrapValidator("revalidateField", "queryText")
				});

				function mySearch() {
					var form = $("#form")
					var fv = form.data("bootstrapValidator")
					fv.validate()
					if (fv.isValid()) {
						var form1 = new FormData($("#form")[0]);
						if (fileExist()) {
							zhRunning = "正在上传文件"
						}
						var element = "<div id='content'><span id='info'>" + zhRunning + "</span><span id='progress'></span>&nbsp;<img class='runningImage' src='@routes.Assets.at("images/running2.gif")' style='width: 30px;height: 20px;'></div>"
						var index = layer.alert(element, {
							skin: 'layui-layer-molv'
							, closeBtn: 0,
							title: zhInfo,
							btn: []
						});
						$.ajax({
							xhr: function () {
								var myXhr = $.ajaxSettings.xhr();
								if (myXhr.upload) {
									myXhr.upload.addEventListener('progress', progressHandlingFunction, false);
								}
								return myXhr
							},
							url: "@routes.GenomeController.phiAnno()",
							type: "post",
							processData: false,
							contentType: false,
							data: form1,
							success: function (data) {
								layer.close(index)
								refreshMissionName()
								$("#missionTable").bootstrapTable("load", data)
							}
						});
					}
				}

				function refreshContent(data) {
					var checkboxHtml = ""

					$.each(data.columnNames, function (i, v) {
						checkboxHtml += "<label style='margin-right: 15px'>" +
								"<input type='checkbox' checked='checked' value='" + v + "' onclick=\"setColumns('" + v + "')\">" + v +
								"</label>"
					})

					$("#checkbox").empty().append(checkboxHtml)
					var html = ""
					$.each(data.columnNames, function (i, v) {
						html += "<th data-field='" + v + "' data-sortable='true'>" + v + "</th>"
					})
					$("#tableContent").empty().append(originalHtml)
					$("#marker").after(html)
					$('#table').bootstrapTable({
						data: data.array,
						exportOptions: {
							csvSeparator: "\t",
							fileName: 'phi.anno'
						},
						exportHiddenColumns: true
					});
					$.each(data.columnNames, function (n, value) {
								$('#table').bootstrapTable('hideColumn', value);
								$("input:checkbox[value='" + value + "']").prop("checked", false)
							}
					);
					var showColumns = ["E-Value", "Hit-Name", "Description"]
					$.each(showColumns, function (n, value) {
								$('#table').bootstrapTable('showColumn', value);
								$("input:checkbox[value='" + value + "']").prop("checked", "true")
							}
					);

				}

				function bootstrapValidator() {
					var infinityNumber = Number.MAX_VALUE
					$('#form').bootstrapValidator({
						framework: 'bootstrap',
						icon: {
							valid: 'glyphicon glyphicon-ok',
							invalid: 'glyphicon glyphicon-remove',
							validating: 'glyphicon glyphicon-refresh'
						},
						fields: {
							queryText: {
								validators: {
									notEmpty: {
										message: 'Query text不能为空！'
									}
								}
							},
							file: {
								validators: {
									notEmpty: {
										message: 'Query fasta file不能为空！'
									},
									file: {
										extension: 'fa,fasta',
										message: 'Query fasta file必须为fasta文件！'
									}
								}
							},
							evalue: {
								validators: {
									notEmpty: {
										message: 'Evalue不能为空！'
									},
									numeric: {
										message: 'Evalue必须是数字！'
									},
									between: {
										min: "0",
										max: infinityNumber,
										message: "Evalue必须大于等于0！"
									}
								}
							},
							maxTargetSeqs: {
								validators: {
									notEmpty: {
										message: 'Max target seqs不能为空！'
									},
									integer: {
										message: 'Max target seqs必须是整数！'
									},
									between: {
										min: "0",
										max: infinityNumber,
										message: "Max target seqs必须大于等于0！"
									}
								}
							},
							missionName: {
								validators: {
									notEmpty: {
										message: '任务名不能为空！'
									},
									remote: {
										message: "任务名已存在！",
										url: "@routes.GenomeController.missionNameCheck()",
										data: function (validator, $field, value) {
											return {
												missionName: $("input[name='missionName']").val(),
												kind:kind
											};
										},
										type: "POST",
										delay: 1000
									},
								}
							},
						}
					});
				}


				$("#input-1").fileinput({
					showPreview: false,
					browseLabel: "选择...",
					removeLabel: "删除文件",
					language: "zh"
				});

		</script>


	}